é‡æ–°ç¼–å†™æœ¬æ–‡ä»¶å¤¹çš„è„šæœ¬ï¼Œ
1ï¼Œbatè„šæœ¬ ä¸Šä¼  clash-linux-amd64-latest.gz ,1755607623989.yml å®‰è£…çš„sh, ä½¿ç”¨ ssh æ‰§è¡Œå®‰è£…
è„šæœ¬å®‰è£…è¿‡ç¨‹ï¼š

    1ï¼Œ gzip -d clash-linux-amd64-latest.gz
        chmod +x clash-linux-amd64
        mv clash-linux-amd64 clash
    2ï¼Œè®¾ç½®æ‰§è¡Œæƒé™ï¼Œ  ä½¿å…¶ å¯ä»¥ clash å‘½ä»¤ç›´æ¥ æ‰§è¡Œ
    3ï¼Œè¿è¡Œ
    clash -f /path/to/your/config.yaml
    æ³¨æ„ï¼šè¯·æ›¿æ¢ /path/to/your/config.yaml ä¸ºä½ çš„å®é™…é…ç½®æ–‡ä»¶è·¯å¾„ã€‚

    é…ç½® systemd æœåŠ¡
        ä¾‹å¦‚ï¼š
            [Unit]
            Description=Clash Service
            After=network.target

            [Service]
            Type=simple
            User=<ä½ çš„ç”¨æˆ·å>
            WorkingDirectory=<Clashé…ç½®æ–‡ä»¶ç›®å½•>
            ExecStart=<Clashæ‰§è¡Œæ–‡ä»¶è·¯å¾„> -f <Clashé…ç½®æ–‡ä»¶è·¯å¾„>
            Restart=on-failure

            [Install]
            WantedBy=multi-user.target
é‡æ–°åŠ è½½ systemd ç®¡ç†å™¨é…ç½®ï¼Œå¹¶å¯ç”¨ Clash æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable --now clash.service
systemctl status clash.service


åˆ‡æ¢é…ç½®
å®‰è£…jqå·¥å…·ï¼Œç”¨äºè§£æJSONå­—ç¬¦ä¸²

1
sudo apt install jq
åˆ©ç”¨curlå‘½ä»¤ï¼Œæ‰“å°å½“å‰é…ç½®æ–‡ä»¶

1
2
# æ­¤å¤„çš„ç«¯å£åœ¨ external-controller å·²ç»é…ç½®
curl --request GET --url http://127.0.0.1:9091/proxies
é…ç½®æ–‡ä»¶ä¿¡æ¯å¤ªé•¿ï¼Œåªçœ‹èŠ‚ç‚¹é€‰æ‹©ç­–ç•¥ç»„é€‰ä¸­çš„èŠ‚ç‚¹

1
curl --request GET --url http://127.0.0.1:9091/proxies | jq '.proxies."ğŸš€ èŠ‚ç‚¹é€‰æ‹©".now'
ç¬¬ä¸€æ¬¡è¾“å‡ºç»“æœåº”è¯¥ä¸º DIRECT ç›´è¿ï¼Œæ­¤çŠ¶æ€ä¸‹æ— æ³•ç¿»å¢™ï¼Œæ‹¼æ¥ä¸ºä»¥ä¸‹ curl å‘½ä»¤ï¼Œå…¶ä¸­ proxies åé¢æ˜¯ä½ è¦æ“ä½œçš„ç­–ç•¥ç»„è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œdata å†…çš„ name å¯¹åº”éœ€è¦æ“ä½œçš„å®Œæ•´èŠ‚ç‚¹åï¼Œç”±äºğŸš€ èŠ‚ç‚¹é€‰æ‹©è¿™ä¸ªç­–ç•¥ç»„åŒ…å«emojiå’Œä¸­æ–‡ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè½¬ä¹‰ï¼Œä½¿ç”¨å¦‚ä¸‹åœ¨çº¿ç½‘ç«™è¿›è¡Œè½¬ä¹‰ã€‚

è½¬ä¹‰ç½‘ç«™ï¼šhttps://tool.oschina.net/encode?type=4

æ‹¼æ¥ä¸ºä»¥ä¸‹ curl å‘½ä»¤ï¼Œå…¶ä¸­ proxies åé¢æ˜¯ä½ è¦æ“ä½œçš„ç­–ç•¥ç»„è½¬ä¹‰å­—ç¬¦ä¸²ï¼Œdata å†…çš„ name å¯¹åº”éœ€è¦æ“ä½œçš„å®Œæ•´èŠ‚ç‚¹å

1
curl --request PUT --url "http://127.0.0.1:9091/proxies/%F0%9F%9A%80%20%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9" --header "Content-Type: text/plain" --data "{\"name\": \"<æ›¿æ¢ä¸ºä½ æƒ³è¦é€‰æ‹©çš„èŠ‚ç‚¹>\"}"
æ­£å¸¸æ“ä½œå®Œä¸ä¼šæœ‰è¿”å›å€¼ï¼Œæ­¤æ—¶æˆ‘ä»¬å†æ¬¡è°ƒç”¨å‘½ä»¤æŸ¥çœ‹ï¼Œå¯çœ‹åˆ°è¾“å‡ºä¿®æ”¹çš„èŠ‚ç‚¹ã€‚

1
curl --request GET --url http://127.0.0.1:9091/proxies | jq '.proxies.


export http_proxy=http://127.0.0.1:7890
export https_proxy=http://127.0.0.1:7890